<% content_for :page_title do %>
  メッセージカテゴリ
<% end %>

<main class="relative min-h-screen w-full bg-stone-200 overflow-x-hidden pb-24">
  <div class="flex flex-col items-center px-4 pt-6 w-full max-w-md mx-auto">
    <!-- カテゴリ一覧 -->
    <div class="grid grid-cols-2 gap-4 w-full">
      <% @categories.each do |category| %>
        <%= link_to category_flow_path(category),
          class: "
            bg-white/90 backdrop-blur rounded-2xl p-6 aspect-square
            flex flex-col items-center justify-center text-center
            shadow-[0_6px_14px_rgba(0,0,0,0.08)]
            hover:shadow-[0_10px_22px_rgba(0,0,0,0.12)]
            transition-shadow duration-200
            active:scale-[0.98]
            focus:outline-none focus:ring-4 focus:ring-stone-300
            group
          " do %>

          <!-- アイコン -->
          <span class="
            material-symbols-outlined text-[42px] mb-3
            <%= category.color %>
            group-hover:scale-110 transition-transform
          ">
            <%= category.icon %>
          </span>

          <!-- タイトル -->
          <span class="text-[17px] font-bold text-stone-800 mb-1 leading-snug">
            <%= category.title %>
          </span>

          <!-- ルビ -->
          <span class="text-sm text-stone-600">
            <%= category.ruby %>
          </span>

        <% end %>
      <% end %>
    </div>

    <!-- カテゴリ追加 -->
    <% add_category_path =
        current_user ? new_message_category_path : new_user_session_path %>

    <div class="w-full mt-6">
      <%= link_to add_category_path,
        class: "
          w-full h-14 flex items-center justify-center rounded-2xl
          border-2 border-dashed border-stone-400 bg-transparent
          text-stone-600 text-base font-bold
          hover:bg-white/60 active:scale-[0.98] transition
        " do %>

        <span class="material-symbols-outlined mr-2 text-stone-500">
          add_circle_outline
        </span>
        カテゴリを追加
      <% end %>
    </div>
  </div>
</main>

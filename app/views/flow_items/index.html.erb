<% content_for :page_title do %>
  <%= @message_category[:title] %>
<% end %>

<main class="relative min-h-screen w-full bg-stone-200 overflow-x-hidden pb-24">
  <div class="flex flex-col items-center px-4 pt-6 w-full max-w-md mx-auto">

    <!-- フロー項目一覧 -->
    <div class="grid grid-cols-2 gap-4 w-full">
      <% @flow_items.each do |item| %>
        <%= link_to confirm_flow_item_path(item),
            class: "
              bg-white/90 backdrop-blur rounded-2xl p-6 aspect-square
              flex flex-col items-center justify-center text-center
              shadow-[0_6px_14px_rgba(0,0,0,0.08)]
              hover:shadow-[0_10px_22px_rgba(0,0,0,0.12)]
              transition-shadow duration-200
              active:scale-[0.98]
              focus:outline-none focus:ring-4 focus:ring-stone-300
              group
            " do %>

          <!-- アイコン -->
          <span class="
            material-symbols-outlined
            text-[48px] mb-3
            <%= item.icon_color %>
            group-hover:scale-110
            transition-transform
          ">
            <%= item.icon %>
          </span>

          <!-- メインテキスト（大きめ） -->
          <span class="text-[22px] font-bold text-stone-800 mb-1 leading-snug">
            <%= item.name %>
          </span>

          <!-- ふりがな -->
          <span class="text-base text-stone-600">
            <%= item.kana %>
          </span>

        <% end %>
      <% end %>
    </div>

    <!-- 追加ボタン -->
    <div class="w-full mt-6">
      <% if current_user %>
        <%= link_to new_message_category_flow_item_path(@message_category),
          class: "w-full h-16 flex items-center justify-center rounded-2xl
                  border-2 border-dashed border-stone-400 bg-transparent
                  text-stone-600 text-lg font-bold
                  hover:bg-white/60 active:scale-[0.98] transition" do %>
          <span class="material-symbols-outlined mr-2 text-stone-500 text-2xl">
            add_circle_outline
          </span>
          項目を追加
        <% end %>

      <% else %>
        <%= link_to new_user_session_path,
          class: "
            w-full h-16 flex items-center justify-center rounded-2xl
            border-2 border-dashed border-stone-400 bg-transparent
            text-stone-600 text-lg font-bold
            hover:bg-white/60 active:scale-[0.98] transition
          " do %>

          <span class="material-symbols-outlined mr-2 text-stone-500 text-2xl">
            add_circle_outline
          </span>
          項目を追加
        <% end %>
      <% end %>
    </div>

  </div>
</main>
